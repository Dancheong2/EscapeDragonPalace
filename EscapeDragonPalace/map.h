#pragma once

// 매크로
#define STAGE_CNT 5 // 스테이지 갯수
#define BG_CNT 10 // 맵 배경 요소 갯수
#define BG_LINE 20 // 맵 배경 줄 수
#define PLATFORM_LINE_CNT 10 // 발판 줄 수
#define PLATFORM_STR_MAX 3000 // 발판 문자 최댓값
#define MAP_HEIGHT 49 // 맵 높이
#define MAP_WIDTH SCREEN_WIDTH
#define GOAL_HEIGHT 5 // 도착지점 높이

void DrawMap();
void UpdateMapPos();
int GetMapStatus(); // 현재 맵 불러오기
void SetMapStatus(int src); // 현재 맵 상태 변경하기
int GetPlusY(); // Y 증가값 불러오기
void SetPlusY(int src); // Y 증가값 변경하기
int GetPlusX(); // X 증가값 불러오기
void SetPlusX(int src); // X 증가값 변경하기

// CMD 색깔
typedef enum CMDColor
{
	E_Black,
	E_Blue,
	E_Green,
	E_Teal, // 청록색
	E_Red,
	E_Purple,
	E_Yellow,
	E_White,
	E_Gray,
	E_BrightBlue,
	E_BrightGreen,
	E_BrightTeal,
	E_BrightRed,
	E_BrightPurple,
	E_BrightYellow,
	E_BrightWhite,
} CMDColor;

// 맵
typedef enum MapStatus
{
	E_Jail, // 감옥
	E_DragonPalace, // 용궁
	E_Sea1, // 바다1
	E_Sea2, // 바다2
	E_Ground, // 육지(보스)
} MapStatus;

// 스테이지 배경 구조체
typedef struct StageBG
{
	MyPoint pos; // 출력 위치
	CMDColor color; // 출력 색상
	char bg[SCREEN_HEIGHT][STR_MAX]; // 배경
} StageBG;

// TODO: 맵 따로 저장하는 파일 만들기
/// <summary>
/// 토끼 시작 위치
/// 감옥&용궁: (x: 5, y: 45)
/// 바다1&2: (x: 7, y: 21)
/// </summary>
// 맵 틀
static char g_Map[SCREEN_HEIGHT][SCREEN_WIDTH] =
{
	"∥============================================================================∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥                                                                            ∥",
	"∥============================================================================∥",
};

// 맵 배경
static StageBG g_StageBG[STAGE_CNT][BG_CNT] =
{
{ // 맵 - 감옥
	{
		{2, 1},
		E_Gray,
		{
			"______________________________________________",
			"_   __   __   __   __   __   __   __   __   __|",
			" | |  | |  | |  | |  | |  | |  | |  | |  | |",
			" | |  | |  | |  | |  | |  | |  | |  | |  | |",
			" | |__| |__| |  | |  | |  | |__| |__| |  | |",
			" |  _______  |  | |  | |  |  _______  |  | |",
			"_| |       | |__| |__| |__| | | | | | |__| |",
			"_  |       |  __   __   __  | | | | |  __  |",
			" | |       | |  | |  | |  | | | | |.| |  | |",
			" | |       | |  | |  | |  | | | | | | |  | |",
			" | |       | |  | |  | |  | | | | | | |  | |",
		},
	},
	{
		{6, 13},
		E_Gray,
		{
			"                             ________/\\\\/",
			"                            /\\\\_____\\\\/ |",
			"                         _/\\\\/ |  |  |  |",
			"                    ____/\\\\/|  |  |  |  |",
			"                 _/\\\\__\\\\/  |  |  |  |  |",
			"           _____/\\\\/  |  |  |  |  |  |  |",
			"         _/\\\\__\\\\/ |  |  |  |  |  |  |  |",
			"   _____/\\\\/ |  |  |  |  |  |  |  |  |  |",
			" _/\\\\__\\\\/|  |  |  |  |  |  |  |  |  |  |",
			"/\\\\/|  |  |  |  |  |  |  |  |  |  |  |  |",
		},
	},
	{
		{23, 23},
		E_Gray,
		{
			"_____________________________________________________",
			"|                                                    ",
			"|                 _________          _________       ",
			"|        ____    |  _____  |        |  _____  |    __",
			"|       |____|   | | | | | |        | | | | | |   |__",
			"|                | | | | | |        | | | | | |      ",
			"|                | |_|_|_| |        | |_|_|_| |      ",
			"|                |         |        |         |      ",
			"|                |       . |        | .       |      ",
			"|                |  _____  |        |  _____  |      ",
			"|                | | | | | |        | | | | | |      ",
		},
	},
	{
		{2, 37},
		E_Gray,
		{
			"____________________________________________________________________________",
			"_   __   __   __   __   __   __   __   __   __   __   __   __   __   __   __",
			" | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  ",
			" | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  | |  ",
			" | |  | |  | |__| |__| |  | |  | |  | |  | |  | |__| |__| |  | |  | |  | |  ",
			" | |  | |  |  _______  |  | |  | |  | |  | |  |  _______  |  | |  | |  | |  ",
			"_| |__| |__| | | | | | |__| |__| |__| |__| |__| | | | | | |__| |__| |__| |__",
			"_   __   __  | | | | |  __   __   __   __   __  | | | | |  __   __   __   __",
			" | |  | |  | | | | |.| |  | |  | |  | |  | |  | | | | |.| |  | |  | |  | |  ",
			" | |  | |  | | | | | | |  | |  | |  | |  | |  | | | | | | |  | |  | |  | |  ",
			" | |  | |  | | | | | | |  | |  | |  | |  | |  | | | | | | |  | |  | |  | |  ",
		},
	},
	{
		// Goal
		{6, 7},
		E_BrightBlue,
		{
			"  @@@",
			" @@ @@",
			"@@ @ @@",
			" @@ @@",
			"  @@@",
		}
	},
},
{ // 맵 - 용궁
	{
		{36, 4},
		E_Gray,
		{
			"                 /\\        /\\",
			"                ( (________) )",
			"               /             \\",
			"       _______/               \\_______",
			"       \\                             /",
			"        \\___________________________/",
			"             |       ___       |",
			"   __________|______|_|_|______|________",
			"   \\                                   /",
			"    \\_________________________________/",
			"         |        _________        |",
			"         |       |    |    |       |",
			"   ______|_______|____|____|_______|____",
			"  /",
			" /",
			"/_______________________________________",
			"     |           ___________          |",
			"     |          |     |     |         |",
			"     |          |    .|.    |         |",
			"     |          |     |     |         |",
		},
	},
	{
		{3, 29},
		E_Gray,
		{
			"         __ ",
			"       / / /",
			"       \\ \\ \\    __ ",
			"       / / /  / / /",
			"  __   \\ \\ \\  \\ \\ \\",
			"/ / /  / / /  / / /",
			"\\ \\ \\  \\ \\ \\  \\ \\ \\",
		}
	},
	{
		{45, 42},
		E_Gray,
		{
			"        __",
			"       \\ \\ \\",
			" __    / / /",
			"\\ \\ \\  \\ \\ \\",
			"/ / /  / / /",
			"\\ \\ \\  \\ \\ \\",
		}
	},
	{
		{3, 38},
		E_Gray,
		{
			"_____________________ ",
			"                     \\ ",
			"                      \\ ",
			"                       \\ ",
			"________________________\\ ",
			"                  |",
			"_________         |",
			"   |     \\        |",
			"  .|.    |        |",
			"   |     |        |",
		}
	},
	{
		// Goal
		{5, 7},
		E_BrightBlue,
		{
			"  @@@",
			" @@ @@",
			"@@ @ @@",
			" @@ @@",
			"  @@@",
		}
	},
},
{ // 맵 - 바다1
	{
		{ 2, 7 },
		E_Gray,
		{
			"  /\\          /\\",
			" ( (__________) )",
			"/               \\",
			"                 \\_______",
			"                         /",
			"________________________/",
			"                  |",
			"      _____       |",
			"_____|__|__|______|________",
			"                           /",
			"__________________________/",
			"                      |",
			"__ ___________ ____   |",
			"  |           |    |  |",
			"  |           |    |  |",
			"  |           |    |  |",
			"  |           |    |  |",
		}
	},
	{
		{ 40, 18 },
		E_Gray,
		{
			"        __",
			"       \\ \\ \\",
			" __    / / /",
			"\\ \\ \\  \\ \\ \\",
			"/ / /  / / /",
			"\\ \\ \\  \\ \\ \\",
		}
	},
	{
		{ 100, 17 },
		E_Gray,
		{
			"         __ ",
			"       / / /",
			"  __   \\ \\ \\",
			"/ / /  / / /",
			"\\ \\ \\  \\ \\ \\    __",
			"/ / /  / / /  / / /",
			"\\ \\ \\  \\ \\ \\  \\ \\ \\",
		}
	},
	{
		{ 127, 17 },
		E_Gray,
		{
			"  __ ",
			"/ / /",
			"\\ \\ \\    __",
			"/ / /  / / /",
			"\\ \\ \\  \\ \\ \\",
			"/ / /  / / /",
			"\\ \\ \\  \\ \\ \\",
		}
	},
	{
		{ 287, 18 },
		E_BrightBlue,
		{
			"  @@@",
			" @@ @@",
			"@@ @ @@",
			" @@ @@",
			"  @@@",
		} // Goal
	},
},
{ // 맵 - 바다2
	{ 0, }
},
{ // 보스맵 - 육지
	{ 0, },
},
};

// 맵 발판 변수
static char g_StagePlatform[STAGE_CNT][SCREEN_HEIGHT][PLATFORM_STR_MAX] =
{
	{
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
	},
	{ // 맵 - 용궁 발판
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
		"                                                                                                ",
	},
};

// 맵 발판
static StageBG g_StagePlatform2[STAGE_CNT][PLATFORM_LINE_CNT] =
{
{ // 감옥 맵 발판
	{
		{42, 43},
		E_BrightWhite,
		{
			"=======",
		}
	},
	{
		{10, 38},
		E_BrightWhite,
		{
			"============================",
		}
	},
	{
		{20, 34},
		E_BrightWhite,
		{
			"========================================================",
		}
	},
	{
		{52, 29},
		E_BrightWhite,
		{
			"======",
		}
	},
	{
		{2, 23},
		E_BrightWhite,
		{
			"==============================================",
		}
	},
	{
		{60, 17},
		E_BrightWhite,
		{
			"==================",
		}
	},
	{
		{2, 12},
		E_BrightWhite,
		{
			"==================================================",
		}
	},
},
{ // 용궁 맵 발판
	{
		{2, 12},
		E_BrightWhite,
		{
			"=====================",
		}
	},
	{
		{26, 18},
		E_BrightWhite,
		{
			"=======",
		}
	},
	{
		{35, 24},
		E_BrightWhite,
		{
			"=========================================",
		}
	},
	{
		{17, 30},
		E_BrightWhite,
		{
			"========",
		}
	},
	{
		{2, 36},
		E_BrightWhite,
		{
			"=====================================================",
		}
	},
	{
		{60, 42},
		E_BrightWhite,
		{
			"================",
		}
	},
},
{ // 맵 - 바다1
	{
		{ 0, },
	},
},
{ // 맵 - 바다2
	{ 0, },
},
{ // 보스맵 - 육지
	{
		{ 10, 19 },
		E_BrightWhite,
		{
			"=========================================",
		}
	},
	{
		{ 10, 14 },
		E_BrightWhite,
		{
			"=========================================",
		}
	},
	{
		{ 10, 9 },
		E_BrightWhite,
		{
			"=========================================",
		}
	},
}
};